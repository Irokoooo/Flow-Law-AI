<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LawFlow AI - æ¶‰å¤–æ³•åŠ¡åˆè§„å®¡æŸ¥å¹³å°</title>
    <link rel="stylesheet" href="shared/css/style.css">
    <link rel="stylesheet" href="shared/css/components.css">
    <style>
        /* ç™»å½•å¼¹çª—åŸºç¡€æ ·å¼ä¸æ˜¾ç¤ºæ§åˆ¶ */
        .login-modal {display:none;position:fixed;inset:0;z-index:1500;background:rgba(0,0,0,0.55);backdrop-filter:blur(6px);align-items:center;justify-content:center;padding:20px;}
        .login-modal.active {display:flex;}
        .login-container {background:#ffffff;border-radius:14px;max-width:420px;width:100%;padding:38px 36px 30px;box-shadow:0 18px 55px -10px rgba(15,30,61,0.35);position:relative;animation:loginFade .55s cubic-bezier(.25,.8,.25,1);}
        @keyframes loginFade {from {opacity:0;transform:translateY(26px);} to {opacity:1;transform:translateY(0);} }
        .login-header h2 {margin:0 0 6px;font-size:1.55rem;color:#1a365d;font-weight:700;letter-spacing:.5px;}
        .login-header p {margin:0 0 18px;font-size:.9rem;color:#4a5568;}
        #loginForm input {width:100%;padding:12px 14px;margin:8px 0;border:1px solid #cbd5e0;border-radius:8px;font-size:.95rem;transition:.25s;background:#f8fafc;}
        #loginForm input:focus {outline:none;border-color:#667eea;box-shadow:0 0 0 3px rgba(102,126,234,.25);} 
        #loginForm button {width:100%;padding:14px 25px;margin-top:12px;font-size:1rem;border:none;border-radius:10px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;font-weight:600;cursor:pointer;letter-spacing:.5px;transition:.35s;}
        #loginForm button:hover {transform:translateY(-3px);box-shadow:0 12px 30px -6px rgba(102,126,234,.55);} 
        .close-login {position:absolute;right:16px;top:14px;font-size:24px;color:#4a5568;cursor:pointer;transition:.3s;line-height:1;}
        .close-login:hover {color:#1a365d;transform:rotate(90deg);} 
        .divider {margin:26px 0 14px;text-align:center;position:relative;font-size:.75rem;color:#718096;}
        .divider span {background:#fff;padding:0 10px;position:relative;z-index:2;}
        .divider:before {content:'';position:absolute;left:0;right:0;top:50%;height:1px;background:#e2e8f0;z-index:1;} 
        .social-login {display:flex;justify-content:center;gap:16px;margin-top:8px;}
        .social-btn {width:44px;height:44px;border-radius:50%;background:#f1f5f9;display:flex;align-items:center;justify-content:center;font-size:1.1rem;color:#4a5568;cursor:pointer;transition:.35s;box-shadow:0 4px 12px rgba(0,0,0,.08);} 
        .social-btn:hover {background:#667eea;color:#fff;transform:translateY(-4px);} 
        .login-links {display:flex;align-items:center;justify-content:space-between;margin-top:4px;font-size:.75rem;color:#4a5568;} 
        .login-links a {color:#667eea;text-decoration:none;} .login-links a:hover {text-decoration:underline;} 
        /* é£˜èŠ±ï¼ˆlogoèŠ±ç“£ï¼‰åŠ¨ç”» */
        .petals-container {position:absolute;inset:0;pointer-events:none;overflow:hidden;z-index:3;}
        .petal {position:absolute;width:18px;height:18px;background:radial-gradient(circle at 30% 30%, #ffffff 0%, #dbeafe 60%, #93c5fd 100%);border-radius:60% 40% 55% 45%;opacity:.65;box-shadow:0 4px 10px -2px rgba(0,0,0,.25);animation:petalFloat linear infinite;}
        @keyframes petalFloat {0% {transform:translateY(0) translateX(0) rotate(0deg);} 50% {opacity:.85;} 100% {transform:translateY(110vh) translateX(40px) rotate(360deg);} }
        /* åŠŸèƒ½åŒºèƒŒæ™¯è½®æ’­å®¹å™¨ */
        .features-bg-carousel {position:absolute;inset:0;z-index:0;overflow:hidden;border-radius:0;}
        .features-bg-slide {position:absolute;inset:0;background-size:cover;background-position:center;opacity:0;transition:opacity 1.2s ease-in-out;filter:brightness(.55) contrast(1.05) saturate(1.1);}
        .features-bg-slide.active {opacity:1;}
        .features {position:relative;}
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <img src="shared/assets/icon/logo.png" alt="LawFlow AI Logo" class="logo-img">
                <div class="logo-text">
                    <h2>LawFlow AI</h2>
                    <span>æ¶‰å¤–æ³•åŠ¡åˆè§„å®¡æŸ¥å¹³å°</span>
                </div>
            </div>
            <ul class="nav-menu">
                <li class="nav-item"><a href="#home" class="nav-link">é¦–é¡µ</a></li>
                <li class="nav-item"><a href="#features" class="nav-link">æ ¸å¿ƒåŠŸèƒ½</a></li>
                <li class="nav-item"><a href="#workflow" class="nav-link">å·¥ä½œæµç¨‹</a></li>
                <li class="nav-item"><a href="#about" class="nav-link">å…³äºæˆ‘ä»¬</a></li>
                <li class="nav-item"><a href="javascript:void(0)" class="nav-link cta-button login-trigger" data-login>ç™»å½•</a></li>
                <li class="nav-item"><a href="#features" class="nav-link cta-button">å¼€å§‹ä½“éªŒ</a></li>
                <li class="nav-item"><a href="javascript:void(0)" id="logoutBtn" class="nav-link" style="display:none;">é€€å‡º</a></li>
            </ul>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <section id="home" class="hero">
        <div class="hero-background">
            <div class="world-map-bg"></div>
            <div class="floating-shapes">
                <div class="shape shape-1"></div>
                <div class="shape shape-2"></div>
                <div class="shape shape-3"></div>
                <div class="shape shape-4"></div>
            </div>
            <div class="map-overlay"></div>
            <!-- ç²’å­äº¤äº’ Canvas æ›¿æ¢åŸé£˜èŠ± -->
            <canvas id="heroParticles" class="absolute inset-0 w-full h-full"></canvas>
            <!-- æ–°å¢é£˜èŠ±å®¹å™¨ -->
            <div class="petals-container" id="petalsLayer" aria-hidden="true"></div>
        </div>
        <div class="hero-content">
            <h1 class="hero-title" data-i18n="hero.title">AIé©±åŠ¨çš„æ¶‰å¤–æ³•åŠ¡åˆè§„æ™ºèƒ½å¹³å°</h1>
            <p class="hero-subtitle">10ç§’é£é™©è¯„åˆ† Â· å¤šè¯­è¨€æ”¯æŒ Â· å…¨çƒåˆè§„æ•°æ®åº“</p>
            <div class="hero-buttons">
                <a href="#features" class="btn primary">æ¢ç´¢åŠŸèƒ½</a>
                <a href="javascript:void(0)" class="btn secondary login-trigger" data-login>ç™»å½•ä½¿ç”¨</a>
            </div>
        </div>
        <div class="scroll-indicator">
            <span>å‘ä¸‹æ»šåŠ¨</span>
            <div class="arrow"></div>
        </div>
    </section>

    <section class="values">
        <div class="container">
            <h2 class="section-title">ä¸ºä»€ä¹ˆé€‰æ‹© LawFlow AI</h2>
            <div class="values-grid">
                <div class="value-card">
                    <div class="value-icon">âš¡</div>
                    <h3>æé€Ÿå®¡æŸ¥</h3>
                    <p>ä¸Šä¼ åˆåŒå10ç§’å†…ç”Ÿæˆé£é™©è¯„åˆ†ï¼Œå¤§å¹…æå‡å·¥ä½œæ•ˆç‡</p>
                </div>
                <div class="value-card">
                    <div class="value-icon">ğŸŒ</div>
                    <h3>å¤šè¯­è¨€æ”¯æŒ</h3>
                    <p>æ”¯æŒä¸­ã€è‹±ã€æ—¥ã€å¾·ç­‰å¤šç§è¯­è¨€åˆåŒå®¡æŸ¥ä¸ç¿»è¯‘</p>
                </div>
                <div class="value-card">
                    <div class="value-icon">ğŸ“Š</div>
                    <h3>æ™ºèƒ½åˆ†æ</h3>
                    <p>åŸºäºAIç®—æ³•æ·±åº¦åˆ†æåˆåŒæ¡æ¬¾ï¼Œè¯†åˆ«æ½œåœ¨é£é™©ç‚¹</p>
                </div>
                <div class="value-card">
                    <div class="value-icon">ğŸ›¡ï¸</div>
                    <h3>åˆè§„ä¿éšœ</h3>
                    <p>å¯¹æ¥å…¨çƒåˆè§„æ•°æ®åº“ï¼Œç¡®ä¿ç¬¦åˆå„å›½æ³•å¾‹æ³•è§„</p>
                </div>
            </div>
        </div>
    </section>

    <section id="features" class="features">
        <div class="features-bg-carousel" id="featuresBg">
            <div class="features-bg-slide" style="background-image:url('shared/assets/images/1.png')"></div>
            <div class="features-bg-slide" style="background-image:url('shared/assets/images/2.png')"></div>
            <div class="features-bg-slide" style="background-image:url('shared/assets/images/3.png')"></div>
        </div>
        <div class="container">
            <h2 class="section-title">æ ¸å¿ƒåŠŸèƒ½</h2>
            <div class="features-grid">
                <div class="feature-card" data-target="agent">
                    <div class="card-icon">ğŸ¤–</div>
                    <h3>æ™ºèƒ½åˆè§„é—®ç­”æœºå™¨äºº</h3>
                    <p class="card-description">AIé©±åŠ¨çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿï¼Œä¸ºæ‚¨æä¾›å®æ—¶åˆè§„å’¨è¯¢å’Œé—®é¢˜è§£ç­”</p>
                    <div class="card-hover-content">
                        <div>
                            <h4>æ ¸å¿ƒç‰¹æ€§</h4>
                            <ul>
                                <li>7Ã—24å°æ—¶åœ¨çº¿å’¨è¯¢æœåŠ¡</li>
                                <li>å¤šè¡Œä¸šåˆè§„æ ‡å‡†æ”¯æŒ</li>
                                <li>æ™ºèƒ½è¯­ä¹‰ç†è§£ä¸åŒ¹é…</li>
                                <li>å®æ—¶æ³•è§„æ›´æ–°æ¨é€</li>
                            </ul>
                        </div>
                        <a href="pages/agent.html" class="enter-btn">è¿›å…¥åŠŸèƒ½</a>
                    </div>
                </div>

                <div class="feature-card" data-target="contract">
                    <div class="card-icon">ğŸ“„</div>
                    <h3>æ¶‰å¤–åˆåŒå®¡æŸ¥</h3>
                    <p class="card-description">å…¨æµç¨‹åˆåŒé£é™©æ™ºèƒ½å®¡æŸ¥ï¼Œ10ç§’ç”Ÿæˆä¸“ä¸šé£é™©è¯„ä¼°æŠ¥å‘Š</p>
                    <div class="card-hover-content">
                        <div>
                            <h4>å®¡æŸ¥èŒƒç•´</h4>
                            <ul>
                                <li>é‡‡è´­åˆåŒå®¡æŸ¥</li>
                                <li>ç¨åŠ¡ç›¸å…³å®¡æŸ¥</li>
                                <li>å•†å“äº¤æ˜“å®¡æŸ¥</li>
                                <li>åŠ³åŠ¡åˆåŒå®¡æŸ¥</li>
                            </ul>
                        </div>
                        <a href="pages/contract.html" class="enter-btn">è¿›å…¥åŠŸèƒ½</a>
                    </div>
                </div>

                <div class="feature-card" data-target="radar">
                    <div class="card-icon">ğŸ“¡</div>
                    <h3>è·¨å›½è¡Œä¸šåˆè§„çƒ­ç‚¹é›·è¾¾</h3>
                    <p class="card-description">å®æ—¶ç›‘æ§è¡Œä¸šåˆè§„åŠ¨æ€ï¼Œé¢„è­¦æ½œåœ¨é£é™©</p>
                    <div class="card-hover-content">
                        <div>
                            <h4>ç›‘æ§èŒƒå›´</h4>
                            <ul>
                                <li>æ”¿ç­–æ³•è§„å˜åŒ–è¿½è¸ª</li>
                                <li>è¡Œä¸šé£é™©äº‹ä»¶é¢„è­¦</li>
                                <li>åˆè§„è¶‹åŠ¿åˆ†æ</li>
                                <li>æœ€ä½³å®è·µåˆ†äº«</li>
                            </ul>
                        </div>
                        <a href="pages/radar.html" class="enter-btn">è¿›å…¥åŠŸèƒ½</a>
                    </div>
                </div>

                <div class="feature-card" data-target="community">
                    <div class="card-icon">ğŸ‘¥</div>
                    <h3>å¤šè¯­è¨€è·¨å›½äº¤æµç¤¾åŒº</h3>
                    <p class="card-description">ä¸“ä¸šåˆè§„äººå£«äº¤æµå¹³å°ï¼Œå…±äº«ç»éªŒä¸è§è§£</p>
                    <div class="card-hover-content">
                        <div>
                            <h4>ç¤¾åŒºç‰¹è‰²</h4>
                            <ul>
                                <li>ä¸“å®¶åœ¨çº¿ç­”ç–‘</li>
                                <li>æ¡ˆä¾‹ç»éªŒåˆ†äº«</li>
                                <li>åˆè§„çŸ¥è¯†åº“</li>
                                <li>è¡Œä¸šäº¤æµæ´»åŠ¨</li>
                            </ul>
                        </div>
                        <a href="pages/community.html" class="enter-btn">è¿›å…¥åŠŸèƒ½</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="workflow" class="workflow">
        <div class="container">
            <h2 class="section-title">æ™ºèƒ½å®¡æŸ¥å·¥ä½œæµç¨‹</h2>
            <div class="workflow-container">
                <div class="workflow-steps">
                    <div class="step active" data-step="1">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h3>ä¸Šä¼ åˆåŒ</h3>
                            <p>æ”¯æŒPDFã€Wordç­‰å¤šç§æ ¼å¼</p>
                        </div>
                    </div>
                    <div class="step" data-step="2">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h3>AIé£é™©è¯„åˆ†</h3>
                            <p>10ç§’å†…ç”Ÿæˆé«˜ä¸­ä½é£é™©è¯„çº§</p>
                        </div>
                    </div>
                    <div class="step" data-step="3">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h3>æ¡ˆä¾‹åŒ¹é…</h3>
                            <p>æ¯”å¯¹ç›¸ä¼¼æ¡ˆä¾‹ä¸å†å²æ•°æ®</p>
                        </div>
                    </div>
                    <div class="step" data-step="4">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <h3>ç”Ÿæˆä¿®æ”¹å»ºè®®</h3>
                            <p>æä¾›å…·ä½“æ¡æ¬¾ä¼˜åŒ–æ–¹æ¡ˆ</p>
                        </div>
                    </div>
                    <div class="step" data-step="5">
                        <div class="step-number">5</div>
                        <div class="step-content">
                            <h3>è¾“å‡ºä¼˜åŒ–åˆåŒ</h3>
                            <p>ç›´æ¥è·å¾—å¯ä½¿ç”¨çš„å®Œå–„ç‰ˆæœ¬</p>
                        </div>
                    </div>
                </div>
                <div class="workflow-visualization">
                    <div class="visualization-content">
                        <div class="step-detail" id="step-detail-1">
                            <h3>æ™ºèƒ½ä¸Šä¼ ä¸è§£æ</h3>
                            <p>LawFlow AIæ”¯æŒå¤šç§æ–‡æ¡£æ ¼å¼ä¸Šä¼ ï¼Œè‡ªåŠ¨è¯†åˆ«æ–‡æ¡£ç»“æ„ï¼Œæå–å…³é”®æ¡æ¬¾ä¿¡æ¯ã€‚</p>
                            <div class="upload-demo">
                                <div class="file-icon">ğŸ“„</div>
                                <div class="upload-progress">
                                    <div class="progress-bar"></div>
                                </div>
                            </div>
                        </div>
                        <div class="step-detail hidden" id="step-detail-2">
                            <h3>AIé£é™©è¯„åˆ†ç³»ç»Ÿ</h3>
                            <p>åŸºäºæ·±åº¦å­¦ä¹ ç®—æ³•ï¼Œå¿«é€Ÿåˆ†æåˆåŒæ¡æ¬¾ï¼Œè¯†åˆ«æ½œåœ¨æ³•å¾‹é£é™©ä¸åˆè§„é—®é¢˜ã€‚</p>
                            <div class="risk-meter">
                                <div class="meter-scale">
                                    <div class="low-risk">ä½é£é™©</div>
                                    <div class="medium-risk">ä¸­é£é™©</div>
                                    <div class="high-risk">é«˜é£é™©</div>
                                </div>
                                <div class="meter-needle"></div>
                            </div>
                        </div>
                        <div class="step-detail hidden" id="step-detail-3">
                            <h3>æ™ºèƒ½æ¡ˆä¾‹åŒ¹é…</h3>
                            <p>ä»æµ·é‡æ¡ˆä¾‹åº“ä¸­å¯»æ‰¾ç›¸ä¼¼æƒ…å¢ƒï¼Œæä¾›å†å²å¤„ç†æ–¹æ¡ˆä½œä¸ºå‚è€ƒã€‚</p>
                            <div class="case-match">
                                <div class="case-item matched">ç›¸ä¼¼åº¦ 92%</div>
                                <div class="case-item">ç›¸ä¼¼åº¦ 87%</div>
                                <div class="case-item">ç›¸ä¼¼åº¦ 79%</div>
                            </div>
                        </div>
                        <div class="step-detail hidden" id="step-detail-4">
                            <h3>ä¸“ä¸šä¿®æ”¹å»ºè®®</h3>
                            <p>åŸºäºé£é™©ç‚¹ä¸æœ€ä½³å®è·µï¼Œç”Ÿæˆå…·ä½“ã€å¯æ“ä½œçš„æ¡æ¬¾ä¿®æ”¹å»ºè®®ã€‚</p>
                            <div class="suggestion-box">
                                <div class="suggestion-item">
                                    <span class="risk-tag high">é«˜é£é™©</span>
                                    <p>ç¬¬7æ¡è´£ä»»é™åˆ¶æ¡æ¬¾è¿‡äºå®½æ³›ï¼Œå»ºè®®å¢åŠ å…·ä½“é™åˆ¶æ¡ä»¶ã€‚</p>
                                </div>
                            </div>
                        </div>
                        <div class="step-detail hidden" id="step-detail-5">
                            <h3>ä¼˜åŒ–åˆåŒè¾“å‡º</h3>
                            <p>ç”Ÿæˆæ ‡è®°ä¿®æ”¹ç—•è¿¹çš„å®Œå–„ç‰ˆæœ¬ï¼Œå¯ç›´æ¥ç”¨äºå•†åŠ¡è°ˆåˆ¤æˆ–ç­¾ç½²ã€‚</p>
                            <div class="contract-preview">
                                <div class="contract-page">
                                    <div class="page-header">ä¼˜åŒ–åçš„åˆåŒè‰æ¡ˆ</div>
                                    <div class="page-content">
                                        <div class="revision added">æ–°å¢æ¡æ¬¾</div>
                                        <div class="revision modified">ä¿®æ”¹æ¡æ¬¾</div>
                                        <div class="revision deleted">åˆ é™¤æ¡æ¬¾</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>LawFlow AI</h3>
                    <p>æ¶‰å¤–æ³•åŠ¡åˆè§„å®¡æŸ¥å¹³å°</p>
                    <div class="social-links">
                        <a href="#">LinkedIn</a>
                        <a href="#">Twitter</a>
                        <a href="#">WeChat</a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>äº§å“</h4>
                    <ul>
                        <li><a href="pages/agent.html" class="login-required">æ™ºèƒ½é—®ç­”æœºå™¨äºº</a></li>
                        <li><a href="pages/contract.html" class="login-required">åˆåŒå®¡æŸ¥</a></li>
                        <li><a href="pages/radar.html" class="login-required">åˆè§„çƒ­ç‚¹é›·è¾¾</a></li>
                        <li><a href="pages/community.html" class="login-required">äº¤æµç¤¾åŒº</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>å…¬å¸</h4>
                    <ul>
                        <li><a href="#">å…³äºæˆ‘ä»¬</a></li>
                        <li><a href="#">æ–°é—»åŠ¨æ€</a></li>
                        <li><a href="#">æ‹›è´¤çº³å£«</a></li>
                        <li><a href="#">è”ç³»æˆ‘ä»¬</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>æ³•å¾‹</h4>
                    <ul>
                        <li><a href="#">éšç§æ”¿ç­–</a></li>
                        <li><a href="#">æœåŠ¡æ¡æ¬¾</a></li>
                        <li><a href="#">Cookieæ”¿ç­–</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 LawFlow AI. ä¿ç•™æ‰€æœ‰æƒåˆ©.</p>
            </div>
        </div>
    </footer>

    <!-- ç™»å½•å¼¹çª—ï¼ˆä¿®å¤å®¹å™¨ç»“æ„é”™è¯¯ï¼‰ -->
    <div id="loginSection" class="login-modal">
        <div class="login-container">
            <span class="close-login">&times;</span>
            <div class="login-header">
                <h2>è´¦å·ç™»å½•</h2>
                <p>ç™»å½•åå³å¯åŒæ­¥ä¸ªäººåå¥½ï¼ˆç›®å‰è®¿é—®åŠŸèƒ½ä¸å†å¼ºåˆ¶ç™»å½•ï¼‰</p>
            </div>
            <form id="loginForm">
                <input type="text" id="username" placeholder="ç”¨æˆ·å/æ‰‹æœºå·/é‚®ç®±" required>
                <input type="password" id="password" placeholder="è¯·è¾“å…¥å¯†ç " required>
                <div class="login-links">
                    <label>
                        <input type="checkbox" style="width: auto; margin-right: 5px;"> è®°ä½æˆ‘
                    </label>
                    <a href="#">å¿˜è®°å¯†ç ï¼Ÿ</a>  
                </div>
                <button type="submit">ç™»å½•è´¦å·</button>
            </form>
            <div class="divider"><span>å…¶ä»–ç™»å½•æ–¹å¼</span></div>
            <div class="social-login">
                <div class="social-btn"><i>ğŸ“±</i></div>
                <div class="social-btn"><i>ğŸ“§</i></div>
                <div class="social-btn"><i>ğŸŒ</i></div>
            </div>
            <div style="text-align: center; margin-top: 20px; font-size: 14px;">è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ<a href="#" style="color: #1a73e8;">ç«‹å³æ³¨å†Œ</a></div>
        </div>
    </div>

    <!-- Toast å®¹å™¨ -->
    <div id="toast" style="position:fixed;left:50%;top:80px;transform:translateX(-50%);background:#1a365d;color:#fff;padding:10px 18px;border-radius:6px;opacity:0;pointer-events:none;transition:opacity .3s,transform .3s;z-index:2000;font-size:14px;box-shadow:0 4px 12px rgba(0,0,0,.2);"></div>

    <script src="shared/js/api.js"></script>
    <script src="shared/js/script.js"></script>
    <script>
        // äº¤äº’ç²’å­ï¼ˆé è¿‘é¼ æ ‡å‡é€Ÿæ»åœï¼‰
        (function initHeroParticles(){
            const cvs = document.getElementById('heroParticles'); if(!cvs) return; const ctx = cvs.getContext('2d');
            function resize(){ cvs.width = cvs.clientWidth; cvs.height = cvs.clientHeight; }
            window.addEventListener('resize', resize); resize();
            const PARTICLE_COUNT = 100; const particles=[]; let mouse={x:-999,y:-999};
            for(let i=0;i<PARTICLE_COUNT;i++){
                particles.push({
                    x: Math.random()*cvs.width,
                    y: Math.random()*cvs.height,
                    vx: -0.4 + Math.random()*0.8,
                    vy: -0.4 + Math.random()*0.8,
                    r: 0.5 + Math.random()*1.1,
                    hue: 200 + Math.random()*60
                });
            }
            cvs.addEventListener('mousemove', e=>{ const rect=cvs.getBoundingClientRect(); mouse.x=e.clientX-rect.left; mouse.y=e.clientY-rect.top; });
            cvs.addEventListener('mouseleave', ()=>{ mouse.x=-999; mouse.y=-999; });
            function step(){
                ctx.clearRect(0,0,cvs.width,cvs.height);
                particles.forEach(p=>{
                    const dx = p.x - mouse.x; const dy = p.y - mouse.y; const dist = Math.sqrt(dx*dx+dy*dy);
                    if(dist < 110){ // æ»åœå‡é€Ÿ
                        p.vx *= 0.92; p.vy *= 0.92;
                        if(dist < 40){ p.vx += dx/dist*0.12; p.vy += dy/dist*0.12; }
                    } else { // è½»å¾®æ¢å¤é€Ÿåº¦
                        p.vx += (-0.4 + Math.random()*0.8)*0.005; p.vy += (-0.4 + Math.random()*0.8)*0.005;
                        p.vx = Math.max(-1.2, Math.min(1.2, p.vx)); p.vy = Math.max(-1.2, Math.min(1.2, p.vy));
                    }
                    p.x += p.vx; p.y += p.vy;
                    if(p.x < -10) p.x = cvs.width+10; if(p.x > cvs.width+10) p.x = -10;
                    if(p.y < -10) p.y = cvs.height+10; if(p.y > cvs.height+10) p.y = -10;
                    ctx.beginPath(); ctx.fillStyle = `hsla(${p.hue},75%,70%,0.35)`; ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fill();
                });
                requestAnimationFrame(step);
            }
            step();
        })();

        // è‹±é›„åŒºæ–°å¢èŠ±ç“£é£˜è½ï¼ˆä½æ€§èƒ½è®¾å¤‡è‡ªåŠ¨é™çº§ï¼‰
        (function initPetals(){
            const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
            if(prefersReduced) return; // å°Šé‡ç”¨æˆ·å‡å°‘åŠ¨ç”»
            const layer = document.getElementById('petalsLayer'); if(!layer) return;
            const PETAL_COUNT = 30;
            for(let i=0;i<PETAL_COUNT;i++){
                const div = document.createElement('div'); div.className='petal';
                const startX = Math.random()*100; // vw
                const delay = Math.random()*8;
                const duration = 18 + Math.random()*12;
                div.style.left = startX + 'vw';
                div.style.top = (-10 - Math.random()*20) + 'px';
                div.style.animationDuration = duration + 's';
                div.style.animationDelay = delay + 's';
                div.style.transform = `rotate(${Math.random()*360}deg)`;
                div.style.opacity = 0.4 + Math.random()*0.25;
                if(Math.random()<0.35) div.style.filter='blur(1.5px) brightness(1.05)';
                div.style.width = (8 + Math.random()*10) + 'px';
                div.style.height = div.style.width;
                layer.appendChild(div);
            }
            // å‘¨æœŸè¡¥å……é¿å…ç©ºçª—
            setInterval(()=>{
                const extra = document.createElement('div'); extra.className='petal';
                extra.style.left = Math.random()*100 + 'vw';
                extra.style.top = '-18px';
                extra.style.animationDuration = (15 + Math.random()*10) + 's';
                extra.style.animationDelay = '0s';
                extra.style.width = (8 + Math.random()*10) + 'px';
                extra.style.height = extra.style.width;
                extra.style.opacity = 0.35 + Math.random()*0.25;
                layer.appendChild(extra);
                // æ¸…ç†å·²ç»è½åˆ°åº•éƒ¨çš„ > 120 ä¸ªåˆ™è£å‰ª
                if(layer.children.length > 120){
                    for(let k=0;k<20;k++){ if(layer.firstChild) layer.removeChild(layer.firstChild); }
                }
            }, 5000);
        })();

        // è‹±é›„æŒ‰é’®æŸ”å’Œæè¾¹ï¼ˆå·²ç§»é™¤æ–‡å­—é—ªå…‰æ•ˆæœï¼‰
        (function enhanceHero(){
            document.querySelectorAll('.hero-buttons .btn').forEach(btn=>{
                btn.classList.add('glow-btn');
            });
            const style = document.createElement('style'); style.textContent=`
                .glow-btn { position:relative; overflow:hidden; }
                .glow-btn:before { content:''; position:absolute; inset:0; border:1px solid rgba(255,255,255,.28); border-radius:inherit; pointer-events:none; }
                .glow-btn:after { content:''; position:absolute; top:-120%; left:-120%; width:300%; height:300%; background:radial-gradient(circle at 30% 30%, rgba(255,255,255,.28), rgba(255,255,255,0) 70%); opacity:0; transition:.6s; }
                .glow-btn:hover:after { opacity:.9; transform:translate(25px,25px); }
            `; document.head.appendChild(style);
        })();

        // åŠŸèƒ½åŒºèƒŒæ™¯è½®æ’­
        (function initFeaturesBg(){
            const slides = Array.from(document.querySelectorAll('.features-bg-slide'));
            if(!slides.length) return; let idx = 0; slides[0].classList.add('active');
            setInterval(()=>{slides[idx].classList.remove('active'); idx = (idx+1)%slides.length; slides[idx].classList.add('active');}, 4500);
        })();

        function showToast(msg, type='info'){const t=document.getElementById('toast');t.textContent=msg;t.style.background=type==='error'?'#c53030':(type==='success'?'#2f855a':'#1a365d');t.style.opacity='1';t.style.transform='translateX(-50%) translateY(0)';clearTimeout(window.__toastTimer);window.__toastTimer=setTimeout(()=>{t.style.opacity='0';},2600);}    
        document.addEventListener('DOMContentLoaded', function() {
            const loginModal = document.getElementById('loginSection');
            const loginTriggers = document.querySelectorAll('.login-trigger');
            const closeLogin = document.querySelector('.close-login');
            const loginForm = document.getElementById('loginForm');

            let sessionId = localStorage.getItem('lf_session_id') || null;
            let userName = localStorage.getItem('lf_user_name') || null;
            const backendHealthUrl = '/api/login'; // ç”¨äºæ¢æµ‹åç«¯æ˜¯å¦å¯è¾¾ï¼ˆä¸ä¼šçœŸæ­£ç™»å½•ï¼‰

            // æ£€æµ‹åç«¯è”é€šæ€§ï¼ˆGETä¼š405ï¼Œç”¨fetchå†çœ‹æ˜¯å¦CORS/ç½‘ç»œé”™è¯¯ï¼‰
            fetch(backendHealthUrl,{method:'OPTIONS'}).catch(err=>console.warn('åç«¯é¢„æ£€å¤±è´¥(å¯å¿½ç•¥)',err));

            function isLoggedIn(){return !!sessionId;}
            function openLogin(){ loginModal.classList.add('active'); document.body.style.overflow='hidden'; }
            function closeLoginModal(){ loginModal.classList.remove('active'); document.body.style.overflow=''; }

            loginTriggers.forEach(btn=>btn.addEventListener('click', e=>{ if(!isLoggedIn()){ openLogin(); } else { showToast('å·²ç™»å½•: '+(userName||'è´¦æˆ·'),'success'); } }));
            closeLogin.addEventListener('click', closeLoginModal);
            loginModal.addEventListener('click', e=>{ if(e.target===loginModal) closeLoginModal(); });

            loginForm.addEventListener('submit', async function(e){
                e.preventDefault();
                const username = document.getElementById('username').value.trim();
                const password = document.getElementById('password').value.trim();
                if(!username||!password){ showToast('è¯·è¾“å…¥å®Œæ•´ä¿¡æ¯','error'); return; }
                try {
                    const data = await FlowLawAPI.login(username, password);
                    if(data.success){
                        sessionId = data.session_id; userName = data.user.name;
                        localStorage.setItem('lf_session_id', sessionId);
                        localStorage.setItem('lf_user_name', userName);
                        showToast('ç™»å½•æˆåŠŸï¼Œæ¬¢è¿ '+ userName,'success');
                        updateLoginUI();
                        closeLoginModal();
                    } else {
                        showToast(data.message||'ç™»å½•å¤±è´¥','error');
                    }
                } catch(err){
                    console.error('ç™»å½•è¯·æ±‚å¼‚å¸¸: ', err);
                    showToast('æ— æ³•è¿æ¥åç«¯ï¼Œè¯·ç¡®è®¤Flaskåœ¨ http://localhost:5000 è¿è¡Œ','error');
                }
            });

            function updateLoginUI(){
                const loginButtons = document.querySelectorAll('.login-trigger');
                const logoutBtn = document.getElementById('logoutBtn');
                if(isLoggedIn()){
                    loginButtons.forEach(btn=>{ btn.textContent = userName ? (userName + 'ï¼ˆè´¦å·ï¼‰') : 'æˆ‘çš„è´¦å·'; btn.setAttribute('data-logged-in','true'); });
                    if(logoutBtn) logoutBtn.style.display='inline-block';
                } else {
                    loginButtons.forEach(btn=>{ btn.textContent='ç™»å½•'; btn.removeAttribute('data-logged-in'); });
                    if(logoutBtn) logoutBtn.style.display='none';
                }
                // ç¡®ä¿æ»šåŠ¨å¯ç”¨ï¼ˆé˜²æ­¢æº¢å‡ºé”å®šæ®‹ç•™ï¼‰
                document.body.style.overflowY = 'auto';
            }
            updateLoginUI();

            // ç»‘å®šé€€å‡º
            const logoutBtn = document.getElementById('logoutBtn');
            if(logoutBtn){
                logoutBtn.setAttribute('data-action','logout');
            }
            // æ·»åŠ å…¨å±€ä¸»é¢˜åˆ‡æ¢æŒ‰é’®ï¼ˆè‹¥éœ€è¦å¯åœ¨å¯¼èˆªè¿½åŠ ï¼‰ç¤ºä¾‹ï¼š
            const navMenu = document.querySelector('.nav-menu');
            if(navMenu && !document.getElementById('themeToggleNav')){
                const li=document.createElement('li'); li.className='nav-item';
                li.innerHTML='<a id="themeToggleNav" data-action="toggle-theme" class="nav-link" href="javascript:void(0)">æ·±/æµ…è‰²</a>';
                navMenu.appendChild(li);
            }
        });
    </script>
</body>
</html>