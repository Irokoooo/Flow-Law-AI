/* 基础工具类 */
.content-auto { content-visibility: auto; }
.text-shadow { text-shadow: 0 2px 4px rgba(0,0,0,0.1); }
.transition-all-300 { transition: all 300ms ease-in-out; }
.glass-effect { background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2); }
.fade-in { animation: fadeIn 0.8s ease-out forwards; opacity: 0; }
.slide-up { animation: slideUp 0.6s ease-out forwards; opacity: 0; transform: translateY(20px); }
.hover-scale { transition: transform 0.3s ease; }
.hover-scale:hover { transform: scale(1.03); }

/* 动画定义 */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from { 
    opacity: 0;
    transform: translateY(20px);
  }
  to { 
    opacity: 1;
    transform: translateY(0);
  }
}

/* 社区 Hero 增强背景 */
.hero-community { 
  background: radial-gradient(circle at 30% 40%, #243b55 0%, #1a365d 45%, #0f172a 100%);
  position: relative;
  overflow: hidden;
}

.hero-comm-bg { position:absolute; inset:0; overflow:hidden; }
.gradient-mesh-layer { 
  position:absolute; 
  inset:0; 
  background: conic-gradient(from 0deg at 50% 50%, rgba(255,255,255,0.05), transparent 60%, rgba(255,255,255,0.07)); 
  mix-blend-mode:overlay; 
  animation: rotateMesh 22s linear infinite; 
}

@keyframes rotateMesh { to { transform: rotate(360deg); } }

.pulse-blobs { position:absolute; inset:0; pointer-events:none; }
.pulse-blobs .blob { 
  position:absolute; 
  width:380px; 
  height:380px; 
  filter: blur(28px); 
  opacity:0.55; 
  animation: blobPulse 14s ease-in-out infinite; 
}

.pulse-blobs .blob.b1 { 
  top:-120px; 
  left:-90px; 
  background: radial-gradient(circle at 35% 35%, rgba(99,102,241,0.65), rgba(99,102,241,0) 70%);
  animation-delay:0s; 
}

.pulse-blobs .blob.b2 { 
  bottom:-140px; 
  right:-120px; 
  background: radial-gradient(circle at 40% 40%, rgba(236,72,153,0.6), rgba(236,72,153,0) 70%); 
  animation-delay:4s; 
}

.pulse-blobs .blob.b3 { 
  top:40%; 
  left:55%; 
  width:300px; 
  height:300px; 
  background: radial-gradient(circle at 45% 45%, rgba(20,184,166,0.6), rgba(20,184,166,0) 70%); 
  animation-delay:8s; 
}

@keyframes blobPulse { 
  0%,100% { transform: scale(1) translate(0,0); opacity:0.55;} 
  50% { transform: scale(1.25) translate(15px,-20px); opacity:0.75;} 
}

.grid-overlay { 
  position:absolute; 
  inset:0; 
  background-image: linear-gradient(rgba(255,255,255,0.06) 1px, transparent 1px), 
                   linear-gradient(90deg, rgba(255,255,255,0.06) 1px, transparent 1px); 
  background-size: 60px 60px, 60px 60px; 
  mix-blend-mode:overlay; 
  opacity:0.35; 
  animation: gridMove 18s linear infinite; 
}

@keyframes gridMove { 
  0% { transform: translateY(0);} 
  100% { transform: translateY(-60px);} 
}

.floating-tilt { 
  position:relative; 
  animation: floatTilt 10s ease-in-out infinite; 
  box-shadow: 0 15px 35px rgba(0,0,0,0.2);
  border-radius: 12px;
  overflow: hidden;
}

@keyframes floatTilt { 
  0%,100% { transform: translateY(0) rotate(0deg);} 
  50% { transform: translateY(-18px) rotate(1.3deg);} 
}

.hero-glow { 
  position:absolute; 
  inset:-10%; 
  background: radial-gradient(circle at 50% 50%, rgba(255,255,255,0.4), rgba(255,255,255,0) 75%); 
  opacity:0.35; 
  mix-blend-mode:overlay; 
  animation: heroGlow 8s ease-in-out infinite; 
}

@keyframes heroGlow { 
  0%,100% { transform: scale(1) translate(0,0);} 
  50% { transform: scale(1.15) translate(12px,-10px);} 
}

.sheen-title { position:relative; color:#0f172a; background:none; }

@supports((-webkit-background-clip:text) or (background-clip:text)) {
	.sheen-title { 
    background: linear-gradient(90deg,#fff 0%,#e0f2fe 40%,#fff 60%, #dbeafe 100%); 
    -webkit-background-clip:text; 
    background-clip:text; 
    color:transparent; 
  }
}

.sheen-title .title-sheen { 
  position:absolute; 
  top:0; 
  left:-30%; 
  width:35%; 
  height:100%; 
  background: linear-gradient(120deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.8) 50%, rgba(255,255,255,0) 100%); 
  transform: skewX(-30deg); 
  animation: titleSheen 7s ease-in-out infinite; 
}

@keyframes titleSheen { 
  0% { left:-45%; opacity:0;} 
  20% { opacity:1;} 
  55% { left:110%; opacity:0.9;} 
  65% { opacity:0;} 
  100% { left:110%; opacity:0;} 
}

/* 按钮主题增强 */
.join-btn { 
  position:relative; 
  overflow:hidden; 
  transform: translateZ(0);
}

.join-btn { color:#1a365d !important; }

.join-btn:after { 
  content:''; 
  position:absolute; 
  top:-150%; 
  left:-150%; 
  width:300%; 
  height:300%; 
  background: radial-gradient(circle at 35% 35%, rgba(255,255,255,0.4), rgba(255,255,255,0) 70%); 
  opacity:0; 
  transition:.6s; 
  pointer-events:none; 
}

.join-btn:hover:after { 
  opacity:.85; 
  transform: translate(30px,30px); 
}

.info-btn { position:relative; }

.info-btn:before { 
  content:''; 
  position:absolute; 
  inset:0; 
  border:1px solid rgba(255,255,255,0.4); 
  border-radius:inherit; 
  pointer-events:none; 
}

/* Hero 文本容器玻璃效果 */
.hero-community .md\:w-1\/2.mb-8, 
.hero-community .md\:w-1\/2.mb-8.md\:mb-0 { 
  position:relative; 
}

.hero-community .md\:w-1\/2.mb-8.md\:mb-0:before { 
  content:''; 
  position:absolute; 
  inset:-18px -24px -18px -24px; 
  background:rgba(255,255,255,0.06); 
  border:1px solid rgba(255,255,255,0.25); 
  backdrop-filter:blur(12px); 
  -webkit-backdrop-filter:blur(12px); 
  border-radius:22px; 
  z-index:-1; 
}

/* 通用玻璃容器类用于后续面板扩展 */
.glass-panel { 
  position:relative; 
  background:rgba(255,255,255,0.08); 
  border:1px solid rgba(255,255,255,0.25); 
  backdrop-filter:blur(14px); 
  -webkit-backdrop-filter:blur(14px); 
  border-radius:18px; 
}

/* 侧栏与卡片轻度玻璃（保持可读性）*/
.shadow-card { 
  background:#ffffff; 
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(0,0,0,0.05);
}

.shadow-card:hover {
  box-shadow: 0 10px 30px rgba(0,0,0,0.1);
}

.hero-community .join-btn, 
.hero-community .info-btn { 
  box-shadow:0 6px 18px -4px rgba(0,0,0,0.25); 
}

@supports not ((backdrop-filter: blur(10px))) {
	.hero-community .md\:w-1\/2.mb-8.md\:mb-0:before { display:none; }
	.glass-panel { background:#1a365d; }
}

@media (prefers-reduced-motion: reduce) {
	.gradient-mesh-layer, 
  .pulse-blobs .blob, 
  .grid-overlay, 
  .floating-tilt, 
  .hero-glow, 
  .sheen-title .title-sheen { 
    animation: none !important; 
  }
}

/* 全局社区背景与窗口化增强 */
.community-body { 
  min-height:100vh; 
  background:linear-gradient(135deg,#eef3f9 0%, #e1ecf7 45%, #d6e1f2 100%); 
  position:relative; 
}

.community-body:before, 
.community-body:after { 
  content:""; 
  position:fixed; 
  inset:0; 
  pointer-events:none; 
}

.community-body:before { 
  background:radial-gradient(circle at 20% 30%, rgba(147,197,253,0.25) 0%, rgba(147,197,253,0) 55%), 
             radial-gradient(circle at 80% 70%, rgba(191,219,254,0.25) 0%, rgba(191,219,254,0) 60%); 
  mix-blend-mode:screen; 
}

.community-body:after { 
  background:repeating-linear-gradient(45deg, rgba(255,255,255,0.15) 0 2px, transparent 2px 6px); 
  opacity:.35; 
}

.window-section { 
  position:relative; 
  z-index:0; 
  background:linear-gradient(145deg,rgba(255,255,255,0.95),rgba(245,249,255,0.9)); 
  border:1px solid rgba(209,219,235,0.75); 
  box-shadow:0 12px 30px -10px rgba(15,23,42,0.18), 0 3px 8px rgba(15,23,42,0.06); 
  backdrop-filter:blur(8px); 
  -webkit-backdrop-filter:blur(8px); 
  border-radius:26px; 
  overflow:hidden; 
  color:#0f172a; 
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.window-section:hover {
  transform: translateY(-3px);
  box-shadow:0 15px 35px -10px rgba(15,23,42,0.25), 0 5px 12px rgba(15,23,42,0.1);
}

.window-section:before { 
  content:""; 
  position:absolute; 
  inset:0; 
  background:linear-gradient(180deg,rgba(255,255,255,0.55),rgba(255,255,255,0)); 
  pointer-events:none; 
  opacity:.28; 
  z-index:-1; 
}

.window-section:not(.frameless) p:not(.text-white) { color:#475569; }
.window-section:not(.frameless) .text-gray-600 { color:#475569; }
.window-section:not(.frameless) .text-gray-500 { color:#64748b; }
.window-section:not(.frameless) .text-gray-400 { color:#94a3b8; }
.window-section:not(.frameless) .tag-pill { color:#1e293b; }

.window-section.frameless { 
  background:transparent; 
  border:none; 
  box-shadow:none; 
  backdrop-filter:none; 
  -webkit-backdrop-filter:none; 
}

.window-section.frameless:before { display:none; }

.window-section .section-title { position:relative; font-weight:600; }

.community-stats { 
  background:linear-gradient(135deg,#1f3b73 0%, #1d4ed8 45%, #1e3a8a 100%) !important; 
  box-shadow:inset 0 -20px 40px rgba(15,23,42,0.35); 
  position: relative;
  overflow: hidden;
}

.community-stats:before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
  opacity: 0.5;
}

.community-stats .text-gray-200 { color:rgba(232,241,255,0.9); }
.community-stats p { color:rgba(244,249,255,0.92); }

.community-cta { 
  background:linear-gradient(130deg,rgba(255,255,255,0.96),rgba(238,246,255,0.92)); 
  border:1px solid rgba(203,213,225,0.8); 
  box-shadow:0 16px 40px -15px rgba(30,64,175,0.35); 
  position: relative;
}

.community-cta:before { 
  background:linear-gradient(180deg,rgba(255,255,255,0.6),rgba(226,232,240,0.2)); 
}

.community-cta h2 { color:#0f172a; }
.community-cta p { color:#475569; }
.community-cta .bg-primary { box-shadow:0 12px 30px -10px rgba(79,70,229,0.45); }
.community-cta .bg-transparent { color:#1e3a8a; border-color:rgba(79,70,229,0.45); }
.community-cta .bg-transparent:hover { background:rgba(79,70,229,0.08); }

/* 过滤标签/分类按钮文本可见性强化 */
#discussion .flex.flex-wrap.gap-2 button,
#resources .flex.flex-wrap.gap-2 button,
#experts .flex.flex-wrap.gap-2 button { 
  position:relative; 
  font-weight:500; 
  color:#1e293b; 
  transition: all 0.2s ease;
}

#discussion .flex.flex-wrap.gap-2 button:hover:not(.bg-primary),
#resources .flex.flex-wrap.gap-2 button:hover:not(.bg-primary),
#experts .flex.flex-wrap.gap-2 button:hover:not(.bg-primary) {
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

#discussion .flex.flex-wrap.gap-2 button.bg-primary,
#resources .flex.flex-wrap.gap-2 button.bg-primary,
#experts .flex.flex-wrap.gap-2 button.bg-primary { color:#fff; }

/* 渐变文字通用类 */
.gradient-text { color:#0f172a; background:none; }
@supports((-webkit-background-clip:text) or (background-clip:text)) {
	.gradient-text { 
    background:linear-gradient(90deg,#1e3a8a,#4f46e5,#6366f1); 
    -webkit-background-clip:text; 
    background-clip:text; 
    color:transparent; 
  }
}

/* 页脚统计区字体对比校正 */
.bg-primary .text-gray-200 { color:rgba(255,255,255,0.85); }
.bg-primary p.text-gray-200 { font-weight:500; letter-spacing:.5px; }

/* 底部 CTA 白底段落内按钮可读性 */
section.bg-white button.bg-primary { box-shadow:0 6px 18px -4px rgba(0,60,120,0.35); }
section.bg-white button.bg-transparent { color:#1a365d; border-color:#2C5AA0; }
section.bg-white button.bg-transparent:hover { background:#f1f5f9; }

/* 图片加载失败处理 */
.hero-visual img {
  transition: opacity 0.3s ease;
}

.hero-visual img.loading {
  opacity: 0.5;
  background: #f0f0f0 url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 24 24' fill='none' stroke='%23ccc' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='12' cy='12' r='10'%3E%3C/circle%3E%3Cpolyline points='16 12 12 8 8 12'%3E%3C/polyline%3E%3C/svg%3E") center no-repeat;
  background-size: 40px;
}

/* 导航栏滚动效果 */
header {
  transition: background-color 0.3s ease, box-shadow 0.3s ease;
}

header.scrolled {
  background-color: rgba(255, 255, 255, 0.95);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
}

/* 专家卡片特殊效果 */
.expert-card {
  border-radius: 16px;
  overflow: hidden;
  position: relative;
}

.expert-card:before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 4px;
  background: linear-gradient(90deg, #4f46e5, #6366f1);
  opacity: 0;
  transition: opacity 0.3s ease;
}

.expert-card:hover:before {
  opacity: 1;
}

/* 平滑滚动 */
html {
  scroll-behavior: smooth;
}

/* 响应式优化 */
@media (max-width: 768px) {
  .hero-community {
    padding: 12px 0;
  }
  
  .window-section {
    border-radius: 16px;
    padding: 12px;
  }
  
  .community-stats {
    padding: 12px 0;
  }
  
  .community-stats .text-4xl {
    font-size: 2.5rem;
  }
}